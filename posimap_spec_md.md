# アプリ仕様書：立ち位置くん（開発名：PosiMap）

## 1. アプリ概要

- **名称（公開）**：立ち位置くん
- **名称（開発）**：PosiMap
- **目的**：ダンスチームのフォーメーションを視覚的に記録・共有・確認する。
- **対象ユーザー**：ダンス発表会に出演する生徒（将来的にはプロにも対応）
- **利用シーン**：フォーメーション決定・確認・共有、動きの確認
- **対応プラットフォーム**：iOS、Android、Web
- **ネットワーク要件**：基本オフラインで動作、共有時にオンライン接続

---

## 2. 機能一覧

### 2.1 フォーメーション作成／編集

- 舞台サイズ（幅・奥行）をメートル単位で指定
- センターを基準に90cmグリッドを表示
- 最大15名のメンバーを追加可能
- メンバーには以下を設定：
  - 名前（複数文字）
  - 表示用1文字（自由変更可能）
  - 色（12色から選択）
- メンバーを舞台上にドラッグ＆ドロップで配置
- シーン単位で複数のフォーメーションを管理
- シーンは時系列順で横スライド切替
- シーンの前後に挿入・削除可能
- 各シーンにメモを追加可能

### 2.2 共有・保存

- ローカル保存／読み込み対応（JSON形式）
- JSONファイルの共有（SNS連携可能）
- 保存／共有ボタンによる操作
- PDF出力（優先度低、将来的に対応）
- フォーメーションの手動コピー（バージョン管理代替）

### 2.3 UI仕様

- スマートフォンでは、基本的に画面を横向きで使用

- タブレットでは縦長でも横長でも使用可能

- 舞台サイズに関わらず、端末の画面内に舞台全体が収まるよう自動縮尺調整

- 舞台の左右には、グリッド1つ分の空白を常に確保

- 初回起動時に**演目名と舞台サイズを指定**

- 2回目以降は前回のフォーメーションから続き表示

- メイン画面構成：

  - 上から見た舞台ビュー
  - メンバー配置エリア
  - シーン横スライダー
  - 保存／共有ボタン
  - メモ（スマホ：タップで表示／タブレット：常時表示）

---

## 3. データ構造（JSON）

```json
{
  "formation": {
    "id": "f001",
    "title": "春の発表会フォーメーション",
    "stage_width_m": 6.0,
    "stage_depth_m": 4.0,
    "grid_size_m": 0.9,
    "created_at": "2025-08-05T10:00:00+09:00"
  },
  "members": [
    {"id": "m01", "name": "池田", "display_char": "池", "color": "#FF0000"},
    {"id": "m02", "name": "Anne", "display_char": "A", "color": "#00FF00"}
  ],
  "scenes": [
    {
      "id": "s001",
      "order": 1,
      "memo": "オープニングポーズ",
      "positions": [
        {"member_id": "m01", "x": 1.5, "y": 2.0},
        {"member_id": "m02", "x": 4.5, "y": 2.0}
      ]
    },
    {
      "id": "s002",
      "order": 2,
      "memo": "サビ前の移動完了",
      "positions": [
        {"member_id": "m01", "x": 2.5, "y": 1.0},
        {"member_id": "m02", "x": 3.5, "y": 1.0}
      ]
    }
  ]
}
```

---

## 4. 今後の拡張予定（メモ）

- シーンごとのパラパラアニメーション再生（秒数指定）
- 権限管理（閲覧・編集の切り替え）
- プロ向け高機能モード（照明、カメラ角度など）

---

以上。

